分布式校园租赁系统的设计与实现

一、项目概览
大学生刚进入学校，不免会尝试一些新的东西，但并不是每样都是适合自己，租一件物品尝试一下可能好多人都想过。因此，一个可靠的校园租赁系统可以解决很多同学这个问题。
项目基于Java Web，前端用网页展现。该系统包括两个子系统：一是后台管理系统，供管理员使用。二是用户租赁系统，供出租人和承租人使用。非注册用户可以浏览可租赁物品信息。
特点：
1. 分布式：为了解藕和提高扩展性，将系统拆分，普通用户租赁系统和后台管理系统分开部署，用户租赁系统封装出基础服务接口，使用Dubbo供后台管理系统远程方法调用，提高代码复用性。为保证可用性，普通用户租赁系统和后台管理系统都分别使用Docker集群部署。
2. 高安全性：考虑到系统可能遭到黑客攻击，从而导致系统宕机和用户隐私泄漏，系统对常见Web攻击做出防范。使用AOP技术进行XSS防御和敏感词过滤；使用验证码和缓存记录校验次数防暴力破解；使用预编译SQL防SQL注入；使用密码加盐存储操作防密码泄漏；使用SpringSecuriy做角色权限控制。

二、功能描述
1. 公共模块：
（1）告警模块：考虑到生产环境中可能出现的RPC调用失败、系统异步增改数据库出错等影响用户正常使用的异常情景，为保证系统可用性，通过告警及时通知开发人员处理线上Bug。使用阻塞队列存储告警对象，告警分优先级，先执行优先级高的告警。告警通过邮件通知管理员。普通告警直接发送，对于特殊告警，使用Redis记录告警被调用次数，当达到阈值时发送通知。（1000）
（2）基于AOP的安全防御模块：使用AOP进行XSS防御和敏感词过滤。考虑用户上传租赁物品信息等场景，用户可能上传攻击脚本和敏感词，系统对敏感词和XSS攻击做出防范。使用面向切面编程技术，将安全防御的代码从业务代码中分离，对于需要防御的地方只需要加上注解，使用切面拦截做安全处理，从而减少代码侵入性。（500）
2. 用户租赁系统
（1）登录注册模块（1500）：
    b)用户注册需要填写基本信息，使用邮箱注册，防止用户滥用。数据库存储随机生成的盐值和密码加盐后的MD5摘要值，从而减少系统被拖库后用户密码暴露风险。
    a)用户登录使用验证码防止用户暴力破解。使用Redis记录用户密码校验次数，超过一定次数需隔1小时才可再次验证用户名密码。使用Redis存放用户Sesssion信息，并设置Session超时时间。
    c)忘记密码，用户可以通过邮箱找回密码。
（2）租用模块 - 承租人（1000）：
    a）开始租用：用户可查看可租物品信息，可按条件筛选可租物品信息。用户对未被租用物品可执行租赁操作。
    b）我的租用：用户可查看自己已租赁的物品清单，可执行取消申请租赁操作。
（3）出租模块 - 出租人（1000）：
    a）开始出租：出租人可以在相应的类别添加、修改自己要出租的物品信息，上传物品图片到服务器。图片通过FTP协议上传到服务器文件系统。
    b）我的出租：出租人可以查看自己的出租物品，还可以查看单个物品租用历史以及当前租用情况。
（4）近实时的全文搜索模块：为提高大量物品信息搜索速度，解决数据库查询瓶颈，使用搜索引擎Elasticsearch强化搜索功能，对物品信息提供全文搜索功能，并可按类别筛选。（1000）
（5）在线支付模块：对于租金、押金支持支付宝在线支付和查看支付状态，通过调用支付宝开放接口实现。（500）
（6）服务接口封装：封装用户租赁系统中通用接口，供后台管理系统RPC调用。（500）
3. 后台管理系统
（1）登录注册模块：后台管理员帐号密码由运维人员使用脚本手动存入数据库，登录功能复用用户租赁系统的部分代码。(500)
（2）角色权限管理：角色分为三类，分别管理员、出租人、承租人。管理员只能使用“后台管理系统”，出租人、承租人只能使用“用户租赁系统”。
    系统使用Spring Security权限框架，把每个单独的权限和功能（URL+HTTP方法）挂钩。用户访问系统的某一个URL的时候，系统首先检查用目标URL是否和功能权限绑定，判断绑定了在校验用户的角色是否包含指定权限。（500）
（3）用户管理模块：管理员可以查看、修改用户信息。（500）
（4）类别管理模块：管理员可以查看已有类别、修改类别、添加新类别和删除类别等。由于类别信息一般不会变动，类别信息存于缓存，当类别信息发生变化时，刷新缓存。（500）
（5）物品管理模块：管理员可以在相应的类别下添加或修改物品信息，还可以查看物品信息和执行删除物品的操作。（500）
（6）租用管理模块：管理员可以查看用户提交的租用申请信息，可批准和否定用户的租赁申请。当用户归还物品后，管理员可以执行归还操作。（500）
（7）统计报表模块：管理员可查看按类别时间查看物品租用情况的统计报表（500）
（8）实时通信模块：基于Websocket实现实时通讯，用户可以和客服沟通租赁、支付等操作中出现的问题，出租人和承租人之间可在线沟通。（500）

三、技术选型
1. 后端技术：Dubbo、Zookeeper、Redis、Elasticsearch、Spring Security、Spring Framework、SpringMVC、MyBatis、Velocity、Thymeleaf
2. 前端技术：Bootstrap、jQuery、Websocket
3. 数据库：Mysql
4. 容器：Docker

总代码（10000行以上）